---
title: Bug笔记
date: 2026-02-11
authors:
  - name: 猫酒
    email: 2738035238@qq.com
categories:
  - Bug
---
# Bug笔记

### 如果heartbeat设置为10，有什么作用

如果将 heartbeat 设置为10，那么客户端会每10秒向服务器发送一次心跳消息。心跳消息用于检测连接是否仍然有效。

在AMQP协议中，心跳是一种机制，用于检测和保持连接的活跃性。如果服务器在一定时间内没有收到心跳消息，它会认为连接已经断开，然后关闭连接。通过设置心跳时间，客户端可以告诉服务器每隔多长时间发送一次心跳消息，从而保持连接的活跃状态。

在RabbitMQ中，heartbeat选项用于设置心跳间隔。如果heartbeat设置为10，那么客户端会每10秒向服务器发送一次心跳消息。这样可以确保连接保持活跃，并避免由于网络延迟或其他原因导致的连接中断。

需要注意的是，heartbeat的设置取决于你的具体需求和网络环境。如果网络环境不稳定，或者服务器的处理能力有限，那么过高的heartbeat值可能会导致不必要的网络流量和服务器负载。因此，在设置heartbeat时，需要根据实际情况进行权衡和调整。

### “Detected change in 'D:\DeskTop\TopProfile\douyinspider_tv22\weibo_utils\weibo.py', reloading” 

意思是，程序或系统检测到了 'D:\DeskTop\TopProfile\douyinspider_tv22\weibo_utils\weibo.py' 这个文件发生了变化（可能是被修改或更新），因此它正在重新加载或重新运行这个文件。

这种情况通常出现在开发环境中，当开发者修改了代码文件后，IDE（集成开发环境）或相关工具会检测到文件的变化，并自动重新加载代码以反映这些变化。这使得开发者能够立即看到他们所做的更改是如何影响程序的，而不需要手动重新启动程序。

### os.path.basename(__file__) 在 Python 中是一个常见的表达式，它的作用是获取当前正在执行的 Python 文件的路径。

具体来说：

os.path 是 Python 的 os 模块中的一个子模块，它提供了与操作系统交互的方法。

os.path.basename 是 os.path 子模块中的一个函数，它接受一个路径作为参数，并返回该路径的最后一部分，也就是文件或目录的名称。

**file** 是一个内置的 Python 变量，它表示当前 Python 脚本的路径。

因此，os.path.basename(__file__) 的作用是获取当前 Python 脚本的名称。例如，如果你的脚本路径是 /home/user/scripts/my_script.py，那么 os.path.basename(__file__) 的值将是 'my_script.py'。

### QOS

pika 是一个用于 RabbitMQ 的 Python 客户端库。在 AMQP（高级消息队列协议）中，channel.basic_qos 方法用于设置消息的 QoS（Quality of Service，服务质量）级别。

参数 prefetch_count 在 channel.basic_qos 中表示消费者可以预先获取并处理的消息数量。具体来说，当 prefetch_count 被设置为 1 时，消费者会预先获取并处理队列中的下一个消息。

以下是一些关于 QoS 级别的说明：

QoS 0（默认）：消息被发送后，可以被任何数量的消费者接收。如果消费者处理消息的速度跟不上生产者发送消息的速度，那么队列可能会被填满。

QoS 0是MQTT协议中最低的QoS等级。在这个级别下，消息即发即弃，不需要等待确认，也不需要存储和重传。这意味着消息可能会有丢失或传输失败的风险。

当使用QoS 0传递消息时，消息的可靠性完全依赖于底层的TCP协议。TCP只能保证在连接稳定不关闭的情况下消息的可靠到达。一旦出现连接关闭、重置，仍有可能丢失当前处于网络链路或操作系统底层缓冲区中的消息。这也是QoS 0消息最主要的丢失场景。

QoS 1：消息被发送后，可以被一个消费者接收。如果消费者处理消息的速度跟不上生产者发送消息的速度，那么队列可能会被填满。但是，如果多个消费者同时尝试从队列中获取消息，那么只有其中一个消费者可以成功获取消息。

QoS 1是MQTT协议中的一种QoS等级。

在这个级别下，消息的发送者会发送一条消息，并等待接收者确认。如果接收者在规定的时间内没有确认收到消息，发送者会重新发送消息，直到接收者确认收到消息或者发送者达到发送的最大尝试次数。

此外，QoS 1还支持消息的持久化存储。这意味着即使在消息发送者和接收者断开连接后，消息仍然可以被存储在服务器上，并在下次连接时重新发送给接收者。

总的来说，QoS 1提供了比QoS 0更高的消息可靠性，但可能会增加一些额外的网络开销和延迟。

QoS 2：消息被发送后，只能被一个消费者接收。如果消费者处理消息的速度跟不上生产者发送消息的速度，那么队列可能会被填满。但是，如果多个消费者同时尝试从队列中获取消息，那么所有消费者都会等待，直到有消息可用。

QoS 2是MQTT协议中最高级别的QoS等级。

在这个级别下，每条消息仅由预期的收件人接收一次。它是最安全和最慢的服务质量级别，通过发送方和接收方之间的至少两个请求/响应流（四次握手）来保证消息的传递。当接收方从发送方获得QoS 2 PUBLISH数据包时，它会相应地处理发布消息，并使用确认PUBLISH数据包的PUBREC数据包回复发送方。如果发送方没有从接收方收到PUBREC数据包，它会再次发送带有重复（DUP）标志的PUBLISH数据包，直到收到确认。

总的来说，QoS 2可以确保消息在一次传输中不被重复传输，并且仅由预期的收件人接收一次。但是，它也带来了更高的传输复杂性和可能的延迟。

当 prefetch_count 被设置为 1 时，意味着消费者会预先获取并处理队列中的下一个消息。这意味着，当消费者从队列中获取消息时，它会立即处理该消息，而不是等待其他消息可用。这可以提高处理速度，但也可能增加处理失败的风险，因为如果处理当前消息时发生错误，那么消费者将无法获取其他消息进行处理。

### 在上述代码中，current_scroll 获取的是当前浏览器窗口的垂直滚动条位置。这个值表示浏览器窗口已经滚动的距离，以像素为单位。如果滚动条在顶部，current_scroll 的值为0，如果滚动条在底部，current_scroll 的值等于页面的总高度。

### Google相关问题

方法一：使用管理员权限删除文件

1. 右击要删除的文件，选择“属性”选项。
2. 在属性窗口中，点击“安全”选项卡。
3. 点击“编辑”按钮，然后点击“添加”按钮。
4. 在输入框中输入“管理员”（不包括引号），然后点击“检索名称”按钮。
5. 在搜索结果中选择“管理员”帐户，然后点击“确定”按钮。
6. 在权限设置中，选中“完全控制”复选框，然后点击“确定”按钮。
7. 关闭属性窗口，然后尝试删除文件。

谷歌浏览器安装不了解放方案

1.打开注册表： Windows键 + R→输入regedit →确定；

2.找到HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Google\Update；

3.右键删除 Clinet 开头的项；

4.重启电脑，重新安装即可。

注意：安装不上通常原因都是之前安装过Chorme浏览器，但是卸载的时候有残余，此方法是为了清理残余的注册表信息。

删除C:\Program Files  下的Google文件夹

Google文件夹可能是拒绝访问，解决方法：Google文件夹右键“安全” 设置你的权限

一、在“开始”运行中输入“regedit”。

二、进入注册表窗口，在菜单编辑中选择查找功能。

三、在查找目标中输入“google”查找。

四、查找到相关内容后直接删除。

五、删除完成后再进行查找下一个，可以通过编辑中的查找下一个，也可以直接按F3进行查找。

六、全部删除后，重启计算机就可以安装新版本的谷歌浏览器了。